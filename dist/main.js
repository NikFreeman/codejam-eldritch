(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var r;e.g.importScripts&&(r=e.g.location+"");var n=e.g.document;if(!r&&n&&(n.currentScript&&(r=n.currentScript.src),!r)){var a=n.getElementsByTagName("script");a.length&&(r=a[a.length-1].src)}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=r})();const r={azathoth:e.p+"images/Azathoth.png",cthulhu:e.p+"images/Cthulthu.png",iogSothoth:e.p+"images/IogSothoth.png",shubNiggurath:e.p+"images/ShubNiggurath.png"},n=[{id:"azathoth",name:"azathoth",cardFace:r.azathoth,firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:2,blueCards:0,brownCards:4}},{id:"cthulhu",name:"cthulhu",cardFace:r.cthulhu,firstStage:{greenCards:0,blueCards:2,brownCards:2},secondStage:{greenCards:1,blueCards:0,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"iogSothoth",name:"iogSothoth",cardFace:r.iogSothoth,firstStage:{greenCards:0,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"shubNiggurath",name:"shubNiggurath",cardFace:r.shubNiggurath,firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:3,blueCards:1,brownCards:2},thirdStage:{greenCards:2,blueCards:0,brownCards:4}}],a=[{id:"easy",name:"Низкая"},{id:"normal",name:"Средняя"},{id:"hard",name:"Высокая"}],o={brown1:e.p+"images/brown1.png",brown2:e.p+"images/brown2.png",brown3:e.p+"images/brown3.png",brown4:e.p+"images/brown4.png",brown5:e.p+"images/brown5.png",brown6:e.p+"images/brown6.png",brown7:e.p+"images/brown7.png",brown8:e.p+"images/brown8.png",brown9:e.p+"images/brown9.png",brown10:e.p+"images/brown10.png",brown11:e.p+"images/brown11.png",brown12:e.p+"images/brown12.png",brown13:e.p+"images/brown13.png",brown14:e.p+"images/brown14.png",brown15:e.p+"images/brown15.png",brown16:e.p+"images/brown16.png",brown17:e.p+"images/brown17.png",brown18:e.p+"images/brown18.png",brown19:e.p+"images/brown19.png",brown20:e.p+"images/brown20.png",brown21:e.p+"images/brown21.png"},i=[{id:"brown1",cardFace:o.brown1,difficulty:"normal",color:"brown"},{id:"brown2",cardFace:o.brown2,difficulty:"normal",color:"brown"},{id:"brown3",cardFace:o.brown3,difficulty:"normal",color:"brown"},{id:"brown4",cardFace:o.brown4,difficulty:"normal",color:"brown"},{id:"brown5",cardFace:o.brown5,difficulty:"normal",color:"brown"},{id:"brown6",cardFace:o.brown6,difficulty:"hard",color:"brown"},{id:"brown7",cardFace:o.brown7,difficulty:"hard",color:"brown"},{id:"brown8",cardFace:o.brown8,difficulty:"hard",color:"brown"},{id:"brown9",cardFace:o.brown9,difficulty:"hard",color:"brown"},{id:"brown10",cardFace:o.brown10,difficulty:"hard",color:"brown"},{id:"brown11",cardFace:o.brown11,difficulty:"easy",color:"brown"},{id:"brown12",cardFace:o.brown12,difficulty:"easy",color:"brown"},{id:"brown13",cardFace:o.brown13,difficulty:"easy",color:"brown"},{id:"brown14",cardFace:o.brown14,difficulty:"easy",color:"brown"},{id:"brown15",cardFace:o.brown15,difficulty:"normal",color:"brown"},{id:"brown16",cardFace:o.brown16,difficulty:"normal",color:"brown"},{id:"brown17",cardFace:o.brown17,difficulty:"normal",color:"brown"},{id:"brown18",cardFace:o.brown18,difficulty:"normal",color:"brown"},{id:"brown19",cardFace:o.brown19,difficulty:"normal",color:"brown"},{id:"brown20",cardFace:o.brown20,difficulty:"normal",color:"brown"},{id:"brown21",cardFace:o.brown21,difficulty:"easy",color:"brown"}],c={blue1:e.p+"images/blue1.png",blue2:e.p+"images/blue2.png",blue3:e.p+"images/blue3.png",blue4:e.p+"images/blue4.png",blue5:e.p+"images/blue5.png",blue6:e.p+"images/blue6.png",blue7:e.p+"images/blue7.png",blue8:e.p+"images/blue8.png",blue9:e.p+"images/blue9.png",blue10:e.p+"images/blue10.png",blue11:e.p+"images/blue11.png",blue12:e.p+"images/blue12.png"},d=[{id:"blue1",cardFace:c.blue1,difficulty:"hard",color:"blue"},{id:"blue2",cardFace:c.blue2,difficulty:"hard",color:"blue"},{id:"blue3",cardFace:c.blue3,difficulty:"easy",color:"blue"},{id:"blue4",cardFace:c.blue4,difficulty:"easy",color:"blue"},{id:"blue5",cardFace:c.blue5,difficulty:"easy",color:"blue"},{id:"blue6",cardFace:c.blue6,difficulty:"hard",color:"blue"},{id:"blue7",cardFace:c.blue7,difficulty:"normal",color:"blue"},{id:"blue8",cardFace:c.blue8,difficulty:"hard",color:"blue"},{id:"blue9",cardFace:c.blue9,difficulty:"normal",color:"blue"},{id:"blue10",cardFace:c.blue10,difficulty:"easy",color:"blue"},{id:"blue11",cardFace:c.blue11,difficulty:"normal",color:"blue"},{id:"blue12",cardFace:c.blue12,difficulty:"normal",color:"blue"}],t={green1:e.p+"images/green1.png",green2:e.p+"images/green2.png",green3:e.p+"images/green3.png",green4:e.p+"images/green4.png",green5:e.p+"images/green5.png",green6:e.p+"images/green6.png",green7:e.p+"images/green7.png",green8:e.p+"images/green8.png",green9:e.p+"images/green9.png",green10:e.p+"images/green10.png",green11:e.p+"images/green11.png",green12:e.p+"images/green12.png",green13:e.p+"images/green13.png",green14:e.p+"images/green14.png",green15:e.p+"images/green15.png",green16:e.p+"images/green16.png",green17:e.p+"images/green17.png",green18:e.p+"images/green18.png"},g=[{id:"green1",cardFace:t.green1,difficulty:"easy",color:"green"},{id:"green2",cardFace:t.green2,difficulty:"hard",color:"green"},{id:"green3",cardFace:t.green3,difficulty:"hard",color:"green"},{id:"green4",cardFace:t.green4,difficulty:"hard",color:"green"},{id:"green5",cardFace:t.green5,difficulty:"hard",color:"green"},{id:"green6",cardFace:t.green6,difficulty:"hard",color:"green"},{id:"green7",cardFace:t.green7,difficulty:"normal",color:"green"},{id:"green8",cardFace:t.green8,difficulty:"normal",color:"green"},{id:"green9",cardFace:t.green9,difficulty:"normal",color:"green"},{id:"green10",cardFace:t.green10,difficulty:"normal",color:"green"},{id:"green11",cardFace:t.green11,difficulty:"normal",color:"green"},{id:"green12",cardFace:t.green12,difficulty:"easy",color:"green"},{id:"green13",cardFace:t.green13,difficulty:"normal",color:"green"},{id:"green14",cardFace:t.green14,difficulty:"normal",color:"green"},{id:"green15",cardFace:t.green15,difficulty:"normal",color:"green"},{id:"green16",cardFace:t.green16,difficulty:"easy",color:"green"},{id:"green17",cardFace:t.green17,difficulty:"easy",color:"green"},{id:"green18",cardFace:t.green18,difficulty:"easy",color:"green"}],l=[{id:"very-easy",name:"очень легкий"},{id:"easy",name:"легкий"},{id:"normal",name:"средний"},{id:"hard",name:"высокий"},{id:"very-hard",name:"очень высокий"}],u=e.p+"images/mythicCardBackground.png",s=[];let b=[],f=[];const p=["greenCards","blueCards","brownCards"],w=["firstStage","secondStage","thirdStage"],m=document.querySelector(".img-background"),h=document.querySelector(".img-front");function y(e){e.classList.add("hide")}function F(e){e.classList.contains("hide")&&e.classList.remove("hide")}function C(e){const r=document.querySelectorAll(e);for(const e of r)if(e.checked)return e.value}function S(e,r){const a=n.find((r=>r.id===e));return a.firstStage[r]+a.secondStage[r]+a.thirdStage[r]}function v(e,r){const a=n.find((r=>r.id===e));return[a.firstStage[r],a.secondStage[r],a.thirdStage[r]]}function E(){for(let e=0;e<3;e++){let r=0===e?"firstStage":1===e?"secondStage":"thirdStage";document.querySelector(`#${r}-green`).textContent=b[e].greenCards,document.querySelector(`#${r}-blue`).textContent=b[e].blueCards,document.querySelector(`#${r}-brown`).textContent=b[e].brownCards}}function q(){F(h);let e=s.pop(),r=f[0]>0?0:f[1]>0?1:2;if(f[r]--,0===f[r]){let e=0===r?".firstStage":1===r?".secondStage":".thirdStage";document.querySelector(e).classList.add("completed")}let n=e.color+"Cards";b[r][n]--,E(),h.src=e.cardFace,0===s.length&&y(m)}function L(e,r,n){for(let a=0;a<n;a++){let n=z(0,r.length);e.push(r[n]),r.splice(n,1)}}function $(e,r,n){return"very-easy"===r?N(e,a[0].id,n):"easy"===r?j(e,a[2].id):"normal"===r?e.slice():"hard"===r?j(e,a[0].id):"very-hard"===r?N(e,a[2].id,n):void 0}function N(e,r,n){const o=e.filter((e=>e.difficulty===r));return o.length<n&&k(e.filter((e=>e.difficulty===a[1].id)),n-o.length).forEach((e=>o.push(e))),o}function j(e,r){return e.filter((e=>e.difficulty!==r))}function k(e,r){let n=e.slice(),a=[];for(;n.length>0;){let e=z(0,n.length);a.push(n[e]),n.splice(e,1)}return a.slice(0,r)}function z(e,r){return Math.floor(Math.random()*(r-e)+e)}m.src=u,h.src=u,y(m),y(h),n.forEach((e=>{document.getElementById(e.id).src=e.cardFace})),document.getElementById("shuffle-btn").addEventListener("click",(function(){const e=C('input[name="ancients-radio"]'),r=C('input[name="difficulty-radio"]');s.length=0;const a=$(g,r,S(e,p[0])),o=k(a,a.length),c=$(d,r,S(e,p[1])),t=k(c,c.length),u=$(i,r,S(e,p[2])),N=k(u,u.length),j=[],z=[],x=[];L(j,o,v(e,p[0])[0]),L(z,o,v(e,p[0])[1]),L(x,o,v(e,p[0])[2]),L(j,t,v(e,p[1])[0]),L(z,t,v(e,p[1])[1]),L(x,t,v(e,p[1])[2]),L(j,N,v(e,p[2])[0]),L(z,N,v(e,p[2])[1]),L(x,N,v(e,p[2])[2]),k(x,x.length).forEach((e=>s.push(e))),k(z,z.length).forEach((e=>s.push(e))),k(j,j.length).forEach((e=>s.push(e)));const B=l.find((e=>e.id===r)).name;document.querySelector(".shuffle-settings").textContent=`Колода мифов: древний: ${e}    уровень сложности: ${B}`,F(m),y(h);for(let e of w)document.querySelector("."+e).classList.contains("completed")&&document.querySelector("."+e).classList.remove("completed");m.addEventListener("click",q),f.length=0,f=[j.length,z.length,x.length],function(e){const r=n.find((r=>r.id===e));b.length=0,b.push(Object.assign({},r.firstStage)),b.push(Object.assign({},r.secondStage)),b.push(Object.assign({},r.thirdStage))}(e),E()}))})();